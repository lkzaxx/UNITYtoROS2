# OpenArm Configuration File
# 
# This file contains configuration parameters for the OpenArm Unity bridge system.
# Adjust these values based on your specific setup and requirements.

# TCP Communication Settings
tcp_communication:
  ip: "127.0.0.1"          # TCP server IP (localhost for same machine)
  port: 10000              # TCP server port
  timeout: 5.0             # Connection timeout (seconds)
  retry_attempts: 3        # Number of connection retry attempts

# Bridge Node Settings
bridge:
  heartbeat_rate: 1.0      # Heartbeat publishing frequency (Hz)
  heartbeat_text: "openarm_ros2_alive"
  log_level: "INFO"        # DEBUG, INFO, WARN, ERROR
  
# OpenArm Controller Settings
controller:
  control_rate: 100.0      # Control loop frequency (Hz)
  
  # Joint limits (radians)
  joint_limits:
    joint_1: [-3.14159, 3.14159]      # Base rotation
    joint_2: [-1.5708, 1.5708]       # Shoulder pitch
    joint_3: [-3.14159, 3.14159]     # Shoulder roll
    joint_4: [-3.14159, 0.0]         # Elbow pitch
    joint_5: [-3.14159, 3.14159]     # Wrist pitch
    joint_6: [-1.5708, 1.5708]       # Wrist roll
    joint_7: [-3.14159, 3.14159]     # Wrist yaw
  
  # Velocity and acceleration limits
  max_joint_velocity: 1.0    # Maximum joint velocity (rad/s)
  max_joint_acceleration: 2.0 # Maximum joint acceleration (rad/s²)
  
  # Workspace limits [x_min, x_max, y_min, y_max, z_min, z_max] (meters)
  workspace_limits: [0.2, 0.8, -0.4, 0.4, 0.1, 0.6]
  
  # Control gains
  position_gains:
    kp: 10.0               # Proportional gain
    ki: 0.1                # Integral gain
    kd: 1.0                # Derivative gain
  
  # Safety settings
  safety:
    enable_collision_checking: true
    emergency_stop_deceleration: 5.0  # Emergency stop deceleration (rad/s²)
    
# Kinematics Settings
kinematics:
  # DH Parameters [a, alpha, d, theta_offset] for each joint
  # Replace with actual OpenArm DH parameters
  dh_parameters:
    joint_1: [0.0, 0.0, 0.333, 0.0]
    joint_2: [0.0, -1.5708, 0.0, 0.0]
    joint_3: [0.0, 1.5708, 0.316, 0.0]
    joint_4: [0.0825, 1.5708, 0.0, 0.0]
    joint_5: [-0.0825, -1.5708, 0.384, 0.0]
    joint_6: [0.0, 1.5708, 0.0, 0.0]
    joint_7: [0.088, 1.5708, 0.107, 0.0]
  
  # IK solver settings
  ik_solver:
    max_iterations: 100
    tolerance: 0.001       # Position tolerance (meters)
    orientation_tolerance: 0.01  # Orientation tolerance (radians)
    
# Unity Integration Settings
unity:
  # Topic names for Unity communication
  topics:
    # From Unity to ROS
    unity_pose: "/unity/pose"
    unity_joint_commands: "/unity/joint_commands"
    unity_gripper_command: "/unity/gripper_command"
    
    # From ROS to Unity
    heartbeat: "/unity/heartbeat"
    joint_states: "/openarm/joint_states"
    end_effector_pose: "/openarm/end_effector_pose"
    
  # Service names
  services:
    ping: "/unity/ping"
    home_position: "/openarm/home_position"
    
  # Message publishing rates (Hz)
  publishing_rates:
    joint_states: 10.0
    end_effector_pose: 10.0
    status: 1.0

# Simulation Settings (for testing without hardware)
simulation:
  enable: true             # Enable simulation mode
  joint_simulation:
    movement_speed: 0.1    # Simulation movement speed factor
    noise_level: 0.001     # Joint position noise (radians)
  
  # Initial joint positions (radians)
  initial_joint_positions: [0.0, 0.0, 0.0, -1.57, 0.0, 0.0, 0.0]

# Logging and Diagnostics
logging:
  log_joint_commands: false    # Log all joint commands (verbose)
  log_pose_commands: true      # Log pose commands
  log_tcp_messages: false      # Log TCP communication (very verbose)
  
  # Log file settings
  log_to_file: false
  log_file_path: "/tmp/openarm_bridge.log"
  max_log_file_size: "10MB"

# Hardware Interface Settings (for real OpenArm)
hardware:
  enable: false            # Enable hardware interface
  can_interface: "can0"    # CAN interface name
  can_bitrate: 1000000     # CAN bitrate
  
  # Motor controller settings
  motor_controllers:
    update_rate: 1000      # Motor controller update rate (Hz)
    current_limit: 10.0    # Maximum motor current (A)
    
# Performance Monitoring
performance:
  enable_monitoring: true
  monitoring_rate: 1.0     # Performance monitoring rate (Hz)
  
  # Performance thresholds
  thresholds:
    max_control_loop_time: 0.01    # Maximum control loop time (seconds)
    max_tcp_latency: 0.05          # Maximum TCP communication latency (seconds)
